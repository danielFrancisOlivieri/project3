
<HTML>
<HEAD>
<TITLE>Shakespeare Program</TITLE>
<META AUTHOR="Daniel Olivieri">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <!-- $Id: name_stats_ajax.html,v 1.6 skon Exp $ -->
<link rel="stylesheet" type="text/css" href="name_stats_ajax.css">

</head>

<script>

	
     var XMLHttp;
     function getUsername()
     {
     
     var name= document.getElementById('userName').value;
     document.getElementById('user').innerHTML = name;
     
      }
      
      /*function exitChat()
      {
      clearInterval(intVar)
      }
      */




// comment object 
var commentObject = {
username : "Hamlet",
text: "",
color: "black",
returnOutputString: function() {
 return "$USERNAME*" + this.username + "Cato$COLOR*" + this.color + "$PICTURE*three$TEXT*" + this.text + "$END";
}

}
/*
$(document).ready(function(){
    $("#submitName").click(function(){
       commentObject.username = $("#userName:text").val();
	   console.log(commentObject.userName);
    });
});
*/
var XMLHttp, avoidReplication = "";
if(navigator.appName == "Microsoft Internet Explorer") {
    XMLHttp = new ActiveXObject("Microsoft.XMLHTTP");
} else {
    XMLHttp = new XMLHttpRequest();
}

// return the value of the radio button that is checked
// return an empty string if none are checked, or
// there are no radio buttons
function getCheckedValue(radioObj) {
  if(!radioObj)
     return "";
  var radioLength = radioObj.length;
  if(radioLength == undefined)
     if(radioObj.checked)
        return radioObj.value;
     else
        return "";
  for(var i = 0; i < radioLength; i++) {
     if(radioObj[i].checked) {
        return radioObj[i].value;
     }
   }
    return "";
}
function getresponse () {

   //  var ts = getCheckedValue(document.radioResultsSelect.type_select);

     var message = document.getElementById('usermsg').value;

var colorChosen = $("input[name='color']:checked").val();

if (colorChosen === "0")
{
  console.log("black");
}
if (colorChosen === "1")
{
  console.log("blue");
}
if (colorChosen === "2")
{
  console.log("purple");
}

if (message.length > 1)
{
console.log("message is: " + message);
  // if (name.length < 1) return;
  
  commentObject.text = message;
  message = commentObject.returnOutputString();

    XMLHttp.open("GET", "/cgi-bin/olivierid_JAD_chatAjax.cgi?"
						 + "message=" + message
						 ,true);
						 console.log("working 1");
    XMLHttp.onreadystatechange=function() {
	console.log("working 2");
    var fromCGI = XMLHttp.responseText;
	var avoidReplication = "";
   // document.getElementById('response_area').innerHTML = fromCGI;

	console.log (avoidReplication);
	if ( avoidReplication != fromCGI){
	$("#chatbox").append(" <div> <b>" + fromCGI + "</b>. </div>");
	avoidReplication = fromCGI;

	}

	console.log("this is table: " + fromCGI);
	}
	XMLHttp.send(null);
}


}

</script>

<style>

#response_div
{
border-color: black;
border: dashed;
}


div
{
    width: 400px;
    margin: auto;


}

    #chatbox
{
  padding: 10px;
  background: #fff;
  height: 260px;
  width: 430px;
  border: 1px solid #ACD8F0;
  overflow:auto;
  margin: 0 auto;

}

#topPart
{
  background-color: #f44336;
  width: 100%;
}

</style>

<body>
<!-- <h1> <center>SoftDilemma Chatroom </center> </h1> -->


  <div id = "topPart" class = "jumbotron">

<center>
    <p>Application created by Juvi, Aidan, and Daniel </p>


    <h1>SoftDilemma Chatroom</h1>



<!-- text boc to input username -->
<div id= "UserName" ></div>
<form name="userName" action=""> 
   <input name= "userName" type="text" id="userName" size="10" />
   <input name= "submitName" type="button" onclick= "javascript: getUsername()" 
   id= "submitName" value= Send /> 

<h2>Color </h2>

<!-- drop down box to choose a color -->


<form action="">
  <input type="radio" name="color" value="0"> Black<br>
  <input type="radio" name="color" value="1"> Blue<br>
  <input type="radio" name="color" value="2"> Purple
</form>

</center>

</div>

<h2> <center>Chat Window </center> </h2>

<div id= "wrapper" >
   <div id= "menu">
   <p class= "welcome"> Welcome, <b> <span id="user" ></span></b></p>
   <p class= "logout"><a id= "exit" href= "#">Exit Chat</a></p>
   <div style= "clear:both" ></div>

</div>

<div id= "chatbox" ></div>

<form name="message" action=""> <center>
   <input name= "usermsg" type="text" id="usermsg" size="63" />
  <!-- <input name= "submitmsg" onclick="javascript: getresponse ()" type="submit" id= "submitmsg" value= Send /> -->
   </center>
   </form>

   <p>
<input type="button" onclick="javascript: getresponse ()" name="submit" value="Submit" />
</p>
<br>
   </div>



<script type= "text/javascript">
$(document).ready(function()
{
});

</script>


          </body>
</HTML>
